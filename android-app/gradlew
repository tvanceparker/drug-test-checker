#!/usr/bin/env sh
##############################################################################
# Gradle wrapper
##############################################################################
 set -e
 DIRNAME="$(cd "$(dirname "$0")" && pwd)"
 GRADLE_VERSION="7.6.3"
 GRADLE_DIR="$DIRNAME/.gradle-dist/gradle-$GRADLE_VERSION"
 GRADLE_BIN="$GRADLE_DIR/bin/gradle"

 if [ ! -x "$GRADLE_BIN" ]; then
	 echo "Gradle $GRADLE_VERSION not found locally â€” downloading..."
	 mkdir -p "$DIRNAME/.gradle-dist"
	 ZIP="$DIRNAME/.gradle-dist/gradle-$GRADLE_VERSION-bin.zip"
	 if [ ! -f "$ZIP" ]; then
		 URL="https://services.gradle.org/distributions/gradle-$GRADLE_VERSION-bin.zip"
		 echo "Downloading $URL"
		 if command -v curl >/dev/null 2>&1; then
			 curl -fSL "$URL" -o "$ZIP"
		 elif command -v wget >/dev/null 2>&1; then
			 wget -O "$ZIP" "$URL"
		 else
			 echo "Error: curl or wget required to download Gradle." >&2
			 exit 1
		 fi
	 fi
	 unzip -q -d "$DIRNAME/.gradle-dist" "$ZIP"
	 chmod +x "$GRADLE_BIN" || true
 fi

 exec "$GRADLE_BIN" "$@"
